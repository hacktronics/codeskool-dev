const a0_0x30731b=a0_0x3c27;function a0_0x2b99(){const _0x4b816b=['loading','processor','model','ready','addEventListener','postMessage','4HTXpuO','Loading\x20model...','403983YlMzHe','11LGveXW','data','update','model_id','onnx-community/whisper-base','1887641cwiuqm','133466sqGekJ','2351770yuqZXr','all','tokenizer','now','getInstance','646662FlgXhY','generate','batch_decode','webgpu','complete','load','369905jBtTIS','8vmxata','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','6WMEsGy','2597016JMDiqq','from_pretrained','8qbtlNK','message'];a0_0x2b99=function(){return _0x4b816b;};return a0_0x2b99();}(function(_0x3ee231,_0x136536){const _0x20df90=a0_0x3c27,_0x1d52e9=_0x3ee231();while(!![]){try{const _0x3d266c=-parseInt(_0x20df90(0x91))/0x1*(parseInt(_0x20df90(0x88))/0x2)+-parseInt(_0x20df90(0x97))/0x3+parseInt(_0x20df90(0x80))/0x4*(-parseInt(_0x20df90(0x9d))/0x5)+parseInt(_0x20df90(0xa0))/0x6*(parseInt(_0x20df90(0x90))/0x7)+-parseInt(_0x20df90(0x9e))/0x8*(-parseInt(_0x20df90(0x8a))/0x9)+-parseInt(_0x20df90(0x92))/0xa*(-parseInt(_0x20df90(0x8b))/0xb)+parseInt(_0x20df90(0x7e))/0xc;if(_0x3d266c===_0x136536)break;else _0x1d52e9['push'](_0x1d52e9['shift']());}catch(_0x4148f3){_0x1d52e9['push'](_0x1d52e9['shift']());}}}(a0_0x2b99,0x21211));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x30731b(0x8e)]=null;static [a0_0x30731b(0x94)]=null;static [a0_0x30731b(0x83)]=null;static [a0_0x30731b(0x84)]=null;static async[a0_0x30731b(0x96)](_0x101274=null){const _0x942866=a0_0x30731b;return this['model_id']=_0x942866(0x8f),this[_0x942866(0x94)]??=AutoTokenizer[_0x942866(0x7f)](this[_0x942866(0x8e)],{'progress_callback':_0x101274}),this['processor']??=AutoProcessor[_0x942866(0x7f)](this['model_id'],{'progress_callback':_0x101274}),this['model']??=WhisperForConditionalGeneration[_0x942866(0x7f)](this['model_id'],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':_0x942866(0x9a),'progress_callback':_0x101274}),Promise[_0x942866(0x93)]([this['tokenizer'],this[_0x942866(0x83)],this['model']]);}}let processing=!0x1;function a0_0x3c27(_0x5e3865,_0x542025){const _0x2b9906=a0_0x2b99();return a0_0x3c27=function(_0x3c277c,_0xb4fffb){_0x3c277c=_0x3c277c-0x7e;let _0xec8ca4=_0x2b9906[_0x3c277c];return _0xec8ca4;},a0_0x3c27(_0x5e3865,_0x542025);}async function generate({audio:_0xdf22a3,language:_0xb330e}){const _0x312759=a0_0x30731b;if(processing)return;processing=!0x0,self[_0x312759(0x87)]({'status':'start'});const [_0x2108e5,_0x78f607,_0x28d301]=await AutomaticSpeechRecognitionPipeline[_0x312759(0x96)]();let _0x4e905a,_0x1ec146=0x0;const _0x5b4c8f=new TextStreamer(_0x2108e5,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x2926de=>{const _0x4fa466=_0x312759;let _0x4b1985;_0x4e905a??=performance[_0x4fa466(0x95)](),_0x1ec146++>0x0&&(_0x4b1985=_0x1ec146/(performance[_0x4fa466(0x95)]()-_0x4e905a)*0x3e8),self[_0x4fa466(0x87)]({'status':_0x4fa466(0x8d),'output':_0x2926de,'tps':_0x4b1985,'numTokens':_0x1ec146});}}),_0xf29edd=await _0x78f607(_0xdf22a3),_0x2b766a=await _0x28d301['generate']({..._0xf29edd,'max_new_tokens':0x40,'language':_0xb330e,'streamer':_0x5b4c8f}),_0x326fee=_0x2108e5[_0x312759(0x99)](_0x2b766a,{'skip_special_tokens':!0x0});self[_0x312759(0x87)]({'status':_0x312759(0x9b),'output':_0x326fee}),processing=!0x1;}async function load(){const _0x497a07=a0_0x30731b;self['postMessage']({'status':_0x497a07(0x82),'data':_0x497a07(0x89)});const [_0x25697b,_0x3f3322,_0x1ac2a5]=await AutomaticSpeechRecognitionPipeline[_0x497a07(0x96)](_0x547719=>{const _0x35b643=_0x497a07;self[_0x35b643(0x87)](_0x547719);});self[_0x497a07(0x87)]({'status':'loading','data':_0x497a07(0x9f)}),await _0x1ac2a5[_0x497a07(0x98)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x497a07(0x87)]({'status':_0x497a07(0x85)});}self[a0_0x30731b(0x86)](a0_0x30731b(0x81),async _0x5dcf83=>{const _0xd454b3=a0_0x30731b,{type:_0x41021c,data:_0x42681a}=_0x5dcf83[_0xd454b3(0x8c)];switch(_0x41021c){case _0xd454b3(0x9c):load();break;case _0xd454b3(0x98):generate(_0x42681a);}});