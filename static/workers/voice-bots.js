const a0_0xd74470=a0_0x2c22;(function(_0x5ce859,_0x22a377){const _0x39ff19=a0_0x2c22,_0x435c32=_0x5ce859();while(!![]){try{const _0x2fea10=-parseInt(_0x39ff19(0xa3))/0x1*(-parseInt(_0x39ff19(0xa5))/0x2)+-parseInt(_0x39ff19(0xa0))/0x3+-parseInt(_0x39ff19(0xa2))/0x4*(-parseInt(_0x39ff19(0xa9))/0x5)+-parseInt(_0x39ff19(0xa4))/0x6+-parseInt(_0x39ff19(0x8f))/0x7*(parseInt(_0x39ff19(0x8e))/0x8)+-parseInt(_0x39ff19(0xa1))/0x9*(parseInt(_0x39ff19(0x90))/0xa)+parseInt(_0x39ff19(0xa8))/0xb;if(_0x2fea10===_0x22a377)break;else _0x435c32['push'](_0x435c32['shift']());}catch(_0x23e4ae){_0x435c32['push'](_0x435c32['shift']());}}}(a0_0x14e9,0xa5068));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';function a0_0x14e9(){const _0xec76e9=['2332666HYdmly','model','load','42162659ByBQvO','46270UMznWw','complete','from_pretrained','batch_decode','tokenizer','all','496FrRZoU','143297QPfqHH','40eYTzmF','update','now','loading','postMessage','processor','message','data','model_id','getInstance','ready','webgpu','Loading\x20model...','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','generate','addEventListener','3817269FVwjJp','1353762uVjKym','56jvbeuy','1MRXQZt','7857702TAgohb'];a0_0x14e9=function(){return _0xec76e9;};return a0_0x14e9();}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0xd74470(0x98)]=null;static [a0_0xd74470(0xad)]=null;static [a0_0xd74470(0x95)]=null;static [a0_0xd74470(0xa6)]=null;static async[a0_0xd74470(0x99)](_0x2ae87f=null){const _0x3d17ed=a0_0xd74470;return this[_0x3d17ed(0x98)]='onnx-community/whisper-base',this[_0x3d17ed(0xad)]??=AutoTokenizer[_0x3d17ed(0xab)](this[_0x3d17ed(0x98)],{'progress_callback':_0x2ae87f}),this['processor']??=AutoProcessor['from_pretrained'](this[_0x3d17ed(0x98)],{'progress_callback':_0x2ae87f}),this[_0x3d17ed(0xa6)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x3d17ed(0x98)],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':_0x3d17ed(0x9b),'progress_callback':_0x2ae87f}),Promise[_0x3d17ed(0xae)]([this['tokenizer'],this[_0x3d17ed(0x95)],this[_0x3d17ed(0xa6)]]);}}let processing=!0x1;async function generate({audio:_0x264ade,language:_0x5e6d4d}){const _0xca4cce=a0_0xd74470;if(processing)return;processing=!0x0,self[_0xca4cce(0x94)]({'status':'start'});const [_0x5e10ac,_0x574d78,_0x3d4ee6]=await AutomaticSpeechRecognitionPipeline[_0xca4cce(0x99)]();let _0x37ab07,_0x1a752f=0x0;const _0x1e092d=new TextStreamer(_0x5e10ac,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x24059d=>{const _0x14b48c=_0xca4cce;let _0x120796;_0x37ab07??=performance[_0x14b48c(0x92)](),_0x1a752f++>0x0&&(_0x120796=_0x1a752f/(performance[_0x14b48c(0x92)]()-_0x37ab07)*0x3e8),self[_0x14b48c(0x94)]({'status':_0x14b48c(0x91),'output':_0x24059d,'tps':_0x120796,'numTokens':_0x1a752f});}}),_0x3c7fd5=await _0x574d78(_0x264ade),_0x138457=await _0x3d4ee6['generate']({..._0x3c7fd5,'max_new_tokens':0x40,'language':_0x5e6d4d,'streamer':_0x1e092d}),_0x4e3a3f=_0x5e10ac[_0xca4cce(0xac)](_0x138457,{'skip_special_tokens':!0x0});self[_0xca4cce(0x94)]({'status':_0xca4cce(0xaa),'output':_0x4e3a3f}),processing=!0x1;}function a0_0x2c22(_0x526756,_0x35ffbf){const _0x14e9ef=a0_0x14e9();return a0_0x2c22=function(_0x2c2255,_0x48cc96){_0x2c2255=_0x2c2255-0x8e;let _0x520ff3=_0x14e9ef[_0x2c2255];return _0x520ff3;},a0_0x2c22(_0x526756,_0x35ffbf);}async function load(){const _0xe5cad1=a0_0xd74470;self['postMessage']({'status':_0xe5cad1(0x93),'data':_0xe5cad1(0x9c)});const [_0x39444e,_0x613174,_0x356a87]=await AutomaticSpeechRecognitionPipeline['getInstance'](_0x2d75fd=>{self['postMessage'](_0x2d75fd);});self['postMessage']({'status':_0xe5cad1(0x93),'data':_0xe5cad1(0x9d)}),await _0x356a87[_0xe5cad1(0x9e)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0xe5cad1(0x94)]({'status':_0xe5cad1(0x9a)});}self[a0_0xd74470(0x9f)](a0_0xd74470(0x96),async _0x3a79d6=>{const _0x4f86f7=a0_0xd74470,{type:_0x2860ed,data:_0x27804b}=_0x3a79d6[_0x4f86f7(0x97)];switch(_0x2860ed){case _0x4f86f7(0xa7):load();break;case _0x4f86f7(0x9e):generate(_0x27804b);}});