const a0_0x366bf4=a0_0x24e5;(function(_0x3b511e,_0x52d6c2){const _0x1e6ffb=a0_0x24e5,_0x5d74c3=_0x3b511e();while(!![]){try{const _0x509c01=parseInt(_0x1e6ffb(0x1a8))/0x1+-parseInt(_0x1e6ffb(0x1b2))/0x2*(-parseInt(_0x1e6ffb(0x1b6))/0x3)+parseInt(_0x1e6ffb(0x19d))/0x4+parseInt(_0x1e6ffb(0x1b4))/0x5*(parseInt(_0x1e6ffb(0x19a))/0x6)+parseInt(_0x1e6ffb(0x19c))/0x7*(parseInt(_0x1e6ffb(0x1ab))/0x8)+-parseInt(_0x1e6ffb(0x1b1))/0x9*(parseInt(_0x1e6ffb(0x1ae))/0xa)+parseInt(_0x1e6ffb(0x1b3))/0xb*(-parseInt(_0x1e6ffb(0x1b5))/0xc);if(_0x509c01===_0x52d6c2)break;else _0x5d74c3['push'](_0x5d74c3['shift']());}catch(_0x3c7400){_0x5d74c3['push'](_0x5d74c3['shift']());}}}(a0_0x166e,0x6a0b2));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x366bf4(0x19e)]=null;static [a0_0x366bf4(0x1a6)]=null;static [a0_0x366bf4(0x19f)]=null;static [a0_0x366bf4(0x1a1)]=null;static async[a0_0x366bf4(0x1af)](_0x36ac5e=null){const _0x2bd9e5=a0_0x366bf4;return this['model_id']=_0x2bd9e5(0x1ac),this[_0x2bd9e5(0x1a6)]??=AutoTokenizer['from_pretrained'](this[_0x2bd9e5(0x19e)],{'progress_callback':_0x36ac5e}),this[_0x2bd9e5(0x19f)]??=AutoProcessor[_0x2bd9e5(0x1a3)](this['model_id'],{'progress_callback':_0x36ac5e}),this[_0x2bd9e5(0x1a1)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x2bd9e5(0x19e)],{'dtype':{'encoder_model':_0x2bd9e5(0x1b0),'decoder_model_merged':'q4'},'device':'webgpu','progress_callback':_0x36ac5e}),Promise['all']([this[_0x2bd9e5(0x1a6)],this[_0x2bd9e5(0x19f)],this[_0x2bd9e5(0x1a1)]]);}}let processing=!0x1;function a0_0x166e(){const _0x37b278=['from_pretrained','generate','update','tokenizer','start','320229JhRFnH','ready','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','2072FSIANi','onnx-community/whisper-base','addEventListener','30cbPjkS','getInstance','fp32','1081035GzDqhD','494654LubAlf','3995827afSpIS','5970AFHUuD','60YpYTOZ','9pYDLny','load','3174dHKNCq','loading','3535vSfNQn','3145412ckrQhx','model_id','processor','now','model','postMessage'];a0_0x166e=function(){return _0x37b278;};return a0_0x166e();}async function generate({audio:_0x3e26fc,language:_0x364dfd}){const _0x529ca7=a0_0x366bf4;if(processing)return;processing=!0x0,self[_0x529ca7(0x1a2)]({'status':_0x529ca7(0x1a7)});const [_0x5f079d,_0x3487e3,_0x4047f4]=await AutomaticSpeechRecognitionPipeline[_0x529ca7(0x1af)]();let _0x1faa71,_0x48f26e=0x0;const _0x2c718b=new TextStreamer(_0x5f079d,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x3179ad=>{const _0x1206bd=_0x529ca7;let _0x401396;_0x1faa71??=performance['now'](),_0x48f26e++>0x0&&(_0x401396=_0x48f26e/(performance[_0x1206bd(0x1a0)]()-_0x1faa71)*0x3e8),self['postMessage']({'status':_0x1206bd(0x1a5),'output':_0x3179ad,'tps':_0x401396,'numTokens':_0x48f26e});}}),_0x217bbd=await _0x3487e3(_0x3e26fc),_0xac8285=await _0x4047f4['generate']({..._0x217bbd,'max_new_tokens':0x40,'language':_0x364dfd,'streamer':_0x2c718b}),_0x40dc17=_0x5f079d['batch_decode'](_0xac8285,{'skip_special_tokens':!0x0});self[_0x529ca7(0x1a2)]({'status':'complete','output':_0x40dc17}),processing=!0x1;}function a0_0x24e5(_0x1abb86,_0x405458){const _0x166ed0=a0_0x166e();return a0_0x24e5=function(_0x24e571,_0x4f3bf8){_0x24e571=_0x24e571-0x19a;let _0x140f00=_0x166ed0[_0x24e571];return _0x140f00;},a0_0x24e5(_0x1abb86,_0x405458);}async function load(){const _0x4a1cb3=a0_0x366bf4;self[_0x4a1cb3(0x1a2)]({'status':_0x4a1cb3(0x19b),'data':'Loading\x20model...'});const [_0x1a88b2,_0x194d7a,_0x123a04]=await AutomaticSpeechRecognitionPipeline[_0x4a1cb3(0x1af)](_0x3b6864=>{self['postMessage'](_0x3b6864);});self[_0x4a1cb3(0x1a2)]({'status':_0x4a1cb3(0x19b),'data':_0x4a1cb3(0x1aa)}),await _0x123a04[_0x4a1cb3(0x1a4)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x4a1cb3(0x1a2)]({'status':_0x4a1cb3(0x1a9)});}self[a0_0x366bf4(0x1ad)]('message',async _0x1d00ac=>{const _0xcf3f6f=a0_0x366bf4,{type:_0x10e322,data:_0x844a5e}=_0x1d00ac['data'];switch(_0x10e322){case _0xcf3f6f(0x1b7):load();break;case _0xcf3f6f(0x1a4):generate(_0x844a5e);}});