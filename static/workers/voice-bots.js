const a0_0x2a2c4f=a0_0x190a;(function(_0x4e49fd,_0x341f3a){const _0x38b164=a0_0x190a,_0x40316a=_0x4e49fd();while(!![]){try{const _0x434b62=parseInt(_0x38b164(0x162))/0x1+-parseInt(_0x38b164(0x160))/0x2+parseInt(_0x38b164(0x148))/0x3+-parseInt(_0x38b164(0x151))/0x4+parseInt(_0x38b164(0x156))/0x5*(-parseInt(_0x38b164(0x15a))/0x6)+-parseInt(_0x38b164(0x14b))/0x7*(parseInt(_0x38b164(0x146))/0x8)+parseInt(_0x38b164(0x15f))/0x9;if(_0x434b62===_0x341f3a)break;else _0x40316a['push'](_0x40316a['shift']());}catch(_0x5482be){_0x40316a['push'](_0x40316a['shift']());}}}(a0_0x47a4,0xe2c7c));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';function a0_0x47a4(){const _0x1252a3=['data','2491146CFJPjv','complete','update','9562tvuvol','batch_decode','addEventListener','load','message','fp32','1902396KbtSLe','from_pretrained','all','generate','webgpu','5dwnySo','model_id','tokenizer','postMessage','943302ICwYXq','processor','model','onnx-community/whisper-base','now','9199215IYwaVf','2172190zoDtBM','loading','1356712CMwQvZ','ready','3288EJMtdV'];a0_0x47a4=function(){return _0x1252a3;};return a0_0x47a4();}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x2a2c4f(0x157)]=null;static [a0_0x2a2c4f(0x158)]=null;static [a0_0x2a2c4f(0x15b)]=null;static ['model']=null;static async['getInstance'](_0x479215=null){const _0x4a696c=a0_0x2a2c4f;return this[_0x4a696c(0x157)]=_0x4a696c(0x15d),this[_0x4a696c(0x158)]??=AutoTokenizer[_0x4a696c(0x152)](this[_0x4a696c(0x157)],{'progress_callback':_0x479215}),this[_0x4a696c(0x15b)]??=AutoProcessor[_0x4a696c(0x152)](this[_0x4a696c(0x157)],{'progress_callback':_0x479215}),this[_0x4a696c(0x15c)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x4a696c(0x157)],{'dtype':{'encoder_model':_0x4a696c(0x150),'decoder_model_merged':'q4'},'device':_0x4a696c(0x155),'progress_callback':_0x479215}),Promise[_0x4a696c(0x153)]([this['tokenizer'],this['processor'],this[_0x4a696c(0x15c)]]);}}function a0_0x190a(_0x257049,_0x6ff96b){const _0x47a461=a0_0x47a4();return a0_0x190a=function(_0x190a37,_0x5db9e8){_0x190a37=_0x190a37-0x145;let _0xfee085=_0x47a461[_0x190a37];return _0xfee085;},a0_0x190a(_0x257049,_0x6ff96b);}let processing=!0x1;async function generate({audio:_0x567fad,language:_0x1cf3d4}){const _0x5a7ed0=a0_0x2a2c4f;if(processing)return;processing=!0x0,self[_0x5a7ed0(0x159)]({'status':'start'});const [_0x1e6d9d,_0x1dcdc7,_0x5b4ebc]=await AutomaticSpeechRecognitionPipeline['getInstance']();let _0x276c19,_0x36d465=0x0;const _0x318e79=new TextStreamer(_0x1e6d9d,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x353be0=>{const _0x3cf668=_0x5a7ed0;let _0x4bc7f3;_0x276c19??=performance[_0x3cf668(0x15e)](),_0x36d465++>0x0&&(_0x4bc7f3=_0x36d465/(performance['now']()-_0x276c19)*0x3e8),self[_0x3cf668(0x159)]({'status':_0x3cf668(0x14a),'output':_0x353be0,'tps':_0x4bc7f3,'numTokens':_0x36d465});}}),_0x34dc50=await _0x1dcdc7(_0x567fad),_0x32906c=await _0x5b4ebc['generate']({..._0x34dc50,'max_new_tokens':0x40,'language':_0x1cf3d4,'streamer':_0x318e79}),_0x46ffb8=_0x1e6d9d[_0x5a7ed0(0x14c)](_0x32906c,{'skip_special_tokens':!0x0});self[_0x5a7ed0(0x159)]({'status':_0x5a7ed0(0x149),'output':_0x46ffb8}),processing=!0x1;}async function load(){const _0x9e77a6=a0_0x2a2c4f;self[_0x9e77a6(0x159)]({'status':_0x9e77a6(0x161),'data':'Loading\x20model...'});const [_0x4dde02,_0x1b9105,_0x5dad0a]=await AutomaticSpeechRecognitionPipeline['getInstance'](_0x161703=>{const _0x16c699=_0x9e77a6;self[_0x16c699(0x159)](_0x161703);});self['postMessage']({'status':_0x9e77a6(0x161),'data':'Compiling\x20shaders\x20and\x20warming\x20up\x20model...'}),await _0x5dad0a[_0x9e77a6(0x154)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x9e77a6(0x159)]({'status':_0x9e77a6(0x145)});}self[a0_0x2a2c4f(0x14d)](a0_0x2a2c4f(0x14f),async _0x482474=>{const _0x577069=a0_0x2a2c4f,{type:_0x59e0e0,data:_0x2f3ab4}=_0x482474[_0x577069(0x147)];switch(_0x59e0e0){case _0x577069(0x14e):load();break;case'generate':generate(_0x2f3ab4);}});