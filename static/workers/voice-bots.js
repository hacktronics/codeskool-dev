const a0_0x4d6bb7=a0_0x5dc2;(function(_0x5a9fc7,_0x8d06ef){const _0x82720e=a0_0x5dc2,_0xf7eb90=_0x5a9fc7();while(!![]){try{const _0x1e744b=parseInt(_0x82720e(0xa6))/0x1*(-parseInt(_0x82720e(0x97))/0x2)+parseInt(_0x82720e(0xa9))/0x3+parseInt(_0x82720e(0xac))/0x4*(parseInt(_0x82720e(0xae))/0x5)+-parseInt(_0x82720e(0xb1))/0x6+parseInt(_0x82720e(0xa8))/0x7*(parseInt(_0x82720e(0x91))/0x8)+-parseInt(_0x82720e(0xaf))/0x9+parseInt(_0x82720e(0xa7))/0xa;if(_0x1e744b===_0x8d06ef)break;else _0xf7eb90['push'](_0xf7eb90['shift']());}catch(_0xd0dd44){_0xf7eb90['push'](_0xf7eb90['shift']());}}}(a0_0x1dcc,0x435b7));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';function a0_0x5dc2(_0x3f0dfe,_0x5b9c6f){const _0x1dcc17=a0_0x1dcc();return a0_0x5dc2=function(_0x5dc2b1,_0x789f08){_0x5dc2b1=_0x5dc2b1-0x91;let _0x777b47=_0x1dcc17[_0x5dc2b1];return _0x777b47;},a0_0x5dc2(_0x3f0dfe,_0x5b9c6f);}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x4d6bb7(0x9e)]=null;static [a0_0x4d6bb7(0x9c)]=null;static [a0_0x4d6bb7(0xa5)]=null;static [a0_0x4d6bb7(0x94)]=null;static async[a0_0x4d6bb7(0x9b)](_0x4b95a4=null){const _0xd407c5=a0_0x4d6bb7;return this[_0xd407c5(0x9e)]=_0xd407c5(0xad),this[_0xd407c5(0x9c)]??=AutoTokenizer['from_pretrained'](this[_0xd407c5(0x9e)],{'progress_callback':_0x4b95a4}),this[_0xd407c5(0xa5)]??=AutoProcessor[_0xd407c5(0xaa)](this[_0xd407c5(0x9e)],{'progress_callback':_0x4b95a4}),this[_0xd407c5(0x94)]??=WhisperForConditionalGeneration[_0xd407c5(0xaa)](this['model_id'],{'dtype':{'encoder_model':_0xd407c5(0xa4),'decoder_model_merged':'q4'},'device':_0xd407c5(0x9d),'progress_callback':_0x4b95a4}),Promise['all']([this[_0xd407c5(0x9c)],this[_0xd407c5(0xa5)],this[_0xd407c5(0x94)]]);}}let processing=!0x1;async function generate({audio:_0x3bb0a0,language:_0x1a29fe}){const _0x3ffff0=a0_0x4d6bb7;if(processing)return;processing=!0x0,self['postMessage']({'status':_0x3ffff0(0xa3)});const [_0x383dfe,_0xf2ce76,_0x3b9d92]=await AutomaticSpeechRecognitionPipeline[_0x3ffff0(0x9b)]();let _0x4b1e44,_0x1addab=0x0;const _0x2af4b9=new TextStreamer(_0x383dfe,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x24d27e=>{const _0x434d9e=_0x3ffff0;let _0x528949;_0x4b1e44??=performance[_0x434d9e(0x9f)](),_0x1addab++>0x0&&(_0x528949=_0x1addab/(performance['now']()-_0x4b1e44)*0x3e8),self[_0x434d9e(0xab)]({'status':_0x434d9e(0x99),'output':_0x24d27e,'tps':_0x528949,'numTokens':_0x1addab});}}),_0x3df369=await _0xf2ce76(_0x3bb0a0),_0xdee4a4=await _0x3b9d92[_0x3ffff0(0xa1)]({..._0x3df369,'max_new_tokens':0x40,'language':_0x1a29fe,'streamer':_0x2af4b9}),_0x2bec9d=_0x383dfe[_0x3ffff0(0x96)](_0xdee4a4,{'skip_special_tokens':!0x0});self[_0x3ffff0(0xab)]({'status':_0x3ffff0(0x95),'output':_0x2bec9d}),processing=!0x1;}async function load(){const _0x35c5ab=a0_0x4d6bb7;self['postMessage']({'status':_0x35c5ab(0x93),'data':_0x35c5ab(0x92)});const [_0x9dbc3b,_0x598f55,_0x5dbd46]=await AutomaticSpeechRecognitionPipeline[_0x35c5ab(0x9b)](_0x4ae638=>{self['postMessage'](_0x4ae638);});self[_0x35c5ab(0xab)]({'status':_0x35c5ab(0x93),'data':_0x35c5ab(0x98)}),await _0x5dbd46['generate']({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self['postMessage']({'status':_0x35c5ab(0x9a)});}self['addEventListener'](a0_0x4d6bb7(0xb0),async _0xbfe302=>{const _0x2a0bd7=a0_0x4d6bb7,{type:_0x69f5be,data:_0x4d20b7}=_0xbfe302[_0x2a0bd7(0xa2)];switch(_0x69f5be){case _0x2a0bd7(0xa0):load();break;case _0x2a0bd7(0xa1):generate(_0x4d20b7);}});function a0_0x1dcc(){const _0x4fa8f3=['ready','getInstance','tokenizer','webgpu','model_id','now','load','generate','data','start','fp32','processor','1kOaLAF','5636780GmlZNT','1351jtmapr','470898AiGnek','from_pretrained','postMessage','14264PkKCqp','onnx-community/whisper-base','610uoKETp','2556351LNoerY','message','897522pipUOv','2216DFiidI','Loading\x20model...','loading','model','complete','batch_decode','999272MnTXwu','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','update'];a0_0x1dcc=function(){return _0x4fa8f3;};return a0_0x1dcc();}