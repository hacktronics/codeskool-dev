const a0_0x9be430=a0_0x9904;function a0_0x2eaf(){const _0x5e7c3b=['22509xqAXLr','31775159OjacJx','from_pretrained','getInstance','data','batch_decode','model_id','135FfNbsk','1mPxlJr','1243454vXmZOP','onnx-community/whisper-base','620gQADTW','Loading\x20model...','load','ready','postMessage','102Jcwijj','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','tokenizer','loading','104856UljTFH','all','72300gCnZgv','update','model','2177VZBcYO','12774135RGjWav','24584cjTPoi','start','now','generate','processor','webgpu','12nzNOVr'];a0_0x2eaf=function(){return _0x5e7c3b;};return a0_0x2eaf();}(function(_0x51954c,_0x5cf7ab){const _0x134a80=a0_0x9904,_0x403cb2=_0x51954c();while(!![]){try{const _0x42d4d5=parseInt(_0x134a80(0x213))/0x1*(-parseInt(_0x134a80(0x1f2))/0x2)+-parseInt(_0x134a80(0x212))/0x3*(-parseInt(_0x134a80(0x1fd))/0x4)+-parseInt(_0x134a80(0x1ff))/0x5*(-parseInt(_0x134a80(0x1f9))/0x6)+parseInt(_0x134a80(0x202))/0x7*(parseInt(_0x134a80(0x204))/0x8)+parseInt(_0x134a80(0x20b))/0x9*(parseInt(_0x134a80(0x1f4))/0xa)+parseInt(_0x134a80(0x203))/0xb+parseInt(_0x134a80(0x20a))/0xc*(-parseInt(_0x134a80(0x20c))/0xd);if(_0x42d4d5===_0x5cf7ab)break;else _0x403cb2['push'](_0x403cb2['shift']());}catch(_0x37bd78){_0x403cb2['push'](_0x403cb2['shift']());}}}(a0_0x2eaf,0x9a2ea));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x9be430(0x211)]=null;static [a0_0x9be430(0x1fb)]=null;static ['processor']=null;static [a0_0x9be430(0x201)]=null;static async[a0_0x9be430(0x20e)](_0x35ae65=null){const _0x1154b2=a0_0x9be430;return this[_0x1154b2(0x211)]=_0x1154b2(0x1f3),this[_0x1154b2(0x1fb)]??=AutoTokenizer[_0x1154b2(0x20d)](this['model_id'],{'progress_callback':_0x35ae65}),this['processor']??=AutoProcessor[_0x1154b2(0x20d)](this[_0x1154b2(0x211)],{'progress_callback':_0x35ae65}),this[_0x1154b2(0x201)]??=WhisperForConditionalGeneration[_0x1154b2(0x20d)](this['model_id'],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':_0x1154b2(0x209),'progress_callback':_0x35ae65}),Promise[_0x1154b2(0x1fe)]([this[_0x1154b2(0x1fb)],this[_0x1154b2(0x208)],this[_0x1154b2(0x201)]]);}}let processing=!0x1;async function generate({audio:_0x354d23,language:_0x47110e}){const _0x297587=a0_0x9be430;if(processing)return;processing=!0x0,self[_0x297587(0x1f8)]({'status':_0x297587(0x205)});const [_0x3b5b94,_0x5a4567,_0x4d8a1c]=await AutomaticSpeechRecognitionPipeline[_0x297587(0x20e)]();let _0x4c61bd,_0x3014a2=0x0;const _0x3e5576=new TextStreamer(_0x3b5b94,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x4dceeb=>{const _0x4b6e58=_0x297587;let _0x2c50ce;_0x4c61bd??=performance[_0x4b6e58(0x206)](),_0x3014a2++>0x0&&(_0x2c50ce=_0x3014a2/(performance['now']()-_0x4c61bd)*0x3e8),self[_0x4b6e58(0x1f8)]({'status':_0x4b6e58(0x200),'output':_0x4dceeb,'tps':_0x2c50ce,'numTokens':_0x3014a2});}}),_0x4e6061=await _0x5a4567(_0x354d23),_0x230d11=await _0x4d8a1c[_0x297587(0x207)]({..._0x4e6061,'max_new_tokens':0x40,'language':_0x47110e,'streamer':_0x3e5576}),_0x38e427=_0x3b5b94[_0x297587(0x210)](_0x230d11,{'skip_special_tokens':!0x0});self['postMessage']({'status':'complete','output':_0x38e427}),processing=!0x1;}async function load(){const _0x5d00d8=a0_0x9be430;self[_0x5d00d8(0x1f8)]({'status':_0x5d00d8(0x1fc),'data':_0x5d00d8(0x1f5)});const [_0x55b30e,_0x5b85e4,_0x17455d]=await AutomaticSpeechRecognitionPipeline[_0x5d00d8(0x20e)](_0x131888=>{const _0x266bd4=_0x5d00d8;self[_0x266bd4(0x1f8)](_0x131888);});self[_0x5d00d8(0x1f8)]({'status':_0x5d00d8(0x1fc),'data':_0x5d00d8(0x1fa)}),await _0x17455d[_0x5d00d8(0x207)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self['postMessage']({'status':_0x5d00d8(0x1f7)});}function a0_0x9904(_0x2e3a9d,_0x48eb23){const _0x2eafb3=a0_0x2eaf();return a0_0x9904=function(_0x9904ca,_0x5b4f39){_0x9904ca=_0x9904ca-0x1f2;let _0x55822f=_0x2eafb3[_0x9904ca];return _0x55822f;},a0_0x9904(_0x2e3a9d,_0x48eb23);}self['addEventListener']('message',async _0x270d9d=>{const _0x3560e8=a0_0x9be430,{type:_0x4cb85b,data:_0x340c13}=_0x270d9d[_0x3560e8(0x20f)];switch(_0x4cb85b){case _0x3560e8(0x1f6):load();break;case _0x3560e8(0x207):generate(_0x340c13);}});