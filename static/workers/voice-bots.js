function a0_0x38df(){const _0x54fa3c=['Loading\x20model...','model','4FPyjoB','7343532rPUiYB','postMessage','now','1727140fplewx','update','generate','1798850bKKqyl','message','processor','tokenizer','batch_decode','3424761pqRLYR','onnx-community/whisper-base','fp32','webgpu','ready','data','complete','getInstance','from_pretrained','model_id','loading','5652768OkFblN','542038peFBCy','addEventListener','16UnPdjO','load','all','1514421swUyKp'];a0_0x38df=function(){return _0x54fa3c;};return a0_0x38df();}const a0_0x107760=a0_0xff46;(function(_0x5b3e2e,_0x41efb2){const _0x12545e=a0_0xff46,_0x577e21=_0x5b3e2e();while(!![]){try{const _0x5b7de6=-parseInt(_0x12545e(0x1ae))/0x1+-parseInt(_0x12545e(0x196))/0x2*(-parseInt(_0x12545e(0x193))/0x3)+-parseInt(_0x12545e(0x19a))/0x4+-parseInt(_0x12545e(0x19d))/0x5+-parseInt(_0x12545e(0x1ad))/0x6+parseInt(_0x12545e(0x197))/0x7+parseInt(_0x12545e(0x1b0))/0x8*(parseInt(_0x12545e(0x1a2))/0x9);if(_0x5b7de6===_0x41efb2)break;else _0x577e21['push'](_0x577e21['shift']());}catch(_0x30c775){_0x577e21['push'](_0x577e21['shift']());}}}(a0_0x38df,0x84d1b));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.3.3/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x107760(0x1ab)]=null;static ['tokenizer']=null;static [a0_0x107760(0x19f)]=null;static [a0_0x107760(0x195)]=null;static async[a0_0x107760(0x1a9)](_0x4b6227=null){const _0x3d62b6=a0_0x107760;return this['model_id']=_0x3d62b6(0x1a3),this['tokenizer']??=AutoTokenizer['from_pretrained'](this[_0x3d62b6(0x1ab)],{'progress_callback':_0x4b6227}),this['processor']??=AutoProcessor[_0x3d62b6(0x1aa)](this[_0x3d62b6(0x1ab)],{'progress_callback':_0x4b6227}),this[_0x3d62b6(0x195)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x3d62b6(0x1ab)],{'dtype':{'encoder_model':_0x3d62b6(0x1a4),'decoder_model_merged':'q4'},'device':_0x3d62b6(0x1a5),'progress_callback':_0x4b6227}),Promise[_0x3d62b6(0x192)]([this[_0x3d62b6(0x1a0)],this['processor'],this[_0x3d62b6(0x195)]]);}}function a0_0xff46(_0x502606,_0x7dbfd7){const _0x38df04=a0_0x38df();return a0_0xff46=function(_0xff4603,_0x54d00f){_0xff4603=_0xff4603-0x192;let _0x1156f8=_0x38df04[_0xff4603];return _0x1156f8;},a0_0xff46(_0x502606,_0x7dbfd7);}let processing=!0x1;async function generate({audio:_0x693a8e,language:_0x3b6458}){const _0x156984=a0_0x107760;if(processing)return;processing=!0x0,self[_0x156984(0x198)]({'status':'start'});const [_0x7903e8,_0x1d6c9b,_0x1f10a1]=await AutomaticSpeechRecognitionPipeline['getInstance']();let _0x2a0ab7,_0x5dcadf=0x0;const _0x8ef457=new TextStreamer(_0x7903e8,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x3c8dee=>{const _0x25a1c2=_0x156984;let _0x12077b;_0x2a0ab7??=performance[_0x25a1c2(0x199)](),_0x5dcadf++>0x0&&(_0x12077b=_0x5dcadf/(performance[_0x25a1c2(0x199)]()-_0x2a0ab7)*0x3e8),self[_0x25a1c2(0x198)]({'status':_0x25a1c2(0x19b),'output':_0x3c8dee,'tps':_0x12077b,'numTokens':_0x5dcadf});}}),_0x95f849=await _0x1d6c9b(_0x693a8e),_0x33679d=await _0x1f10a1[_0x156984(0x19c)]({..._0x95f849,'max_new_tokens':0x40,'language':_0x3b6458,'streamer':_0x8ef457}),_0x406cf2=_0x7903e8[_0x156984(0x1a1)](_0x33679d,{'skip_special_tokens':!0x0});self[_0x156984(0x198)]({'status':_0x156984(0x1a8),'output':_0x406cf2}),processing=!0x1;}async function load(){const _0x5d5c97=a0_0x107760;self[_0x5d5c97(0x198)]({'status':'loading','data':_0x5d5c97(0x194)});const [_0x38e808,_0x11e6b9,_0x472ef8]=await AutomaticSpeechRecognitionPipeline['getInstance'](_0x55b015=>{const _0x23d4e8=_0x5d5c97;self[_0x23d4e8(0x198)](_0x55b015);});self[_0x5d5c97(0x198)]({'status':_0x5d5c97(0x1ac),'data':'Compiling\x20shaders\x20and\x20warming\x20up\x20model...'}),await _0x472ef8[_0x5d5c97(0x19c)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self['postMessage']({'status':_0x5d5c97(0x1a6)});}self[a0_0x107760(0x1af)](a0_0x107760(0x19e),async _0x4b2518=>{const _0x297d8a=a0_0x107760,{type:_0x53ae70,data:_0x1be88c}=_0x4b2518[_0x297d8a(0x1a7)];switch(_0x53ae70){case _0x297d8a(0x1b1):load();break;case _0x297d8a(0x19c):generate(_0x1be88c);}});