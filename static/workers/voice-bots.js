function a0_0x1789(){const _0x14c92b=['addEventListener','start','webgpu','9eAjORv','processor','postMessage','loading','from_pretrained','5976000PgsYvE','model_id','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','batch_decode','181840cdxjhW','Loading\x20model...','1461556IDuUgg','getInstance','generate','tokenizer','fp32','1667250Fjyrwt','189fuClCr','41238UiAfcL','model','message','data','4JeqIOB','ready','3879830YEpJTV','load','105435ZwLnSB'];a0_0x1789=function(){return _0x14c92b;};return a0_0x1789();}const a0_0x3c1e04=a0_0x1e96;(function(_0x4c838b,_0x3875b5){const _0xab3cbc=a0_0x1e96,_0x1a93a9=_0x4c838b();while(!![]){try{const _0x12903c=-parseInt(_0xab3cbc(0x1e5))/0x1+parseInt(_0xab3cbc(0x1f2))/0x2*(parseInt(_0xab3cbc(0x1f6))/0x3)+parseInt(_0xab3cbc(0x1e7))/0x4+parseInt(_0xab3cbc(0x1ec))/0x5+-parseInt(_0xab3cbc(0x1ee))/0x6*(-parseInt(_0xab3cbc(0x1ed))/0x7)+-parseInt(_0xab3cbc(0x1e1))/0x8+parseInt(_0xab3cbc(0x1fa))/0x9*(parseInt(_0xab3cbc(0x1f4))/0xa);if(_0x12903c===_0x3875b5)break;else _0x1a93a9['push'](_0x1a93a9['shift']());}catch(_0x220399){_0x1a93a9['push'](_0x1a93a9['shift']());}}}(a0_0x1789,0x65093));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.3.3/dist/transformers.min.js';function a0_0x1e96(_0x2bfefc,_0xcfb7d8){const _0x178950=a0_0x1789();return a0_0x1e96=function(_0x1e96d5,_0x2ff440){_0x1e96d5=_0x1e96d5-0x1e1;let _0xcd996c=_0x178950[_0x1e96d5];return _0xcd996c;},a0_0x1e96(_0x2bfefc,_0xcfb7d8);}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x3c1e04(0x1e2)]=null;static [a0_0x3c1e04(0x1ea)]=null;static [a0_0x3c1e04(0x1fb)]=null;static [a0_0x3c1e04(0x1ef)]=null;static async[a0_0x3c1e04(0x1e8)](_0x416e06=null){const _0x1b45fb=a0_0x3c1e04;return this['model_id']='onnx-community/whisper-base',this[_0x1b45fb(0x1ea)]??=AutoTokenizer[_0x1b45fb(0x1fe)](this[_0x1b45fb(0x1e2)],{'progress_callback':_0x416e06}),this[_0x1b45fb(0x1fb)]??=AutoProcessor[_0x1b45fb(0x1fe)](this[_0x1b45fb(0x1e2)],{'progress_callback':_0x416e06}),this[_0x1b45fb(0x1ef)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x1b45fb(0x1e2)],{'dtype':{'encoder_model':_0x1b45fb(0x1eb),'decoder_model_merged':'q4'},'device':_0x1b45fb(0x1f9),'progress_callback':_0x416e06}),Promise['all']([this[_0x1b45fb(0x1ea)],this['processor'],this[_0x1b45fb(0x1ef)]]);}}let processing=!0x1;async function generate({audio:_0x16f0b8,language:_0x411b52}){const _0xa455a2=a0_0x3c1e04;if(processing)return;processing=!0x0,self[_0xa455a2(0x1fc)]({'status':_0xa455a2(0x1f8)});const [_0x35c642,_0x19c1ab,_0x306ed1]=await AutomaticSpeechRecognitionPipeline['getInstance']();let _0x3f2db0,_0x5e4c61=0x0;const _0x58703b=new TextStreamer(_0x35c642,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x3fe2b9=>{let _0x462a5b;_0x3f2db0??=performance['now'](),_0x5e4c61++>0x0&&(_0x462a5b=_0x5e4c61/(performance['now']()-_0x3f2db0)*0x3e8),self['postMessage']({'status':'update','output':_0x3fe2b9,'tps':_0x462a5b,'numTokens':_0x5e4c61});}}),_0x53056f=await _0x19c1ab(_0x16f0b8),_0x2278aa=await _0x306ed1[_0xa455a2(0x1e9)]({..._0x53056f,'max_new_tokens':0x40,'language':_0x411b52,'streamer':_0x58703b}),_0x14e272=_0x35c642[_0xa455a2(0x1e4)](_0x2278aa,{'skip_special_tokens':!0x0});self[_0xa455a2(0x1fc)]({'status':'complete','output':_0x14e272}),processing=!0x1;}async function load(){const _0x72dfbd=a0_0x3c1e04;self[_0x72dfbd(0x1fc)]({'status':'loading','data':_0x72dfbd(0x1e6)});const [_0x18ccc1,_0x3e46f9,_0x5e64db]=await AutomaticSpeechRecognitionPipeline[_0x72dfbd(0x1e8)](_0xf54612=>{const _0x382e2c=_0x72dfbd;self[_0x382e2c(0x1fc)](_0xf54612);});self['postMessage']({'status':_0x72dfbd(0x1fd),'data':_0x72dfbd(0x1e3)}),await _0x5e64db[_0x72dfbd(0x1e9)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x72dfbd(0x1fc)]({'status':_0x72dfbd(0x1f3)});}self[a0_0x3c1e04(0x1f7)](a0_0x3c1e04(0x1f0),async _0x8c399f=>{const _0x4e4e6f=a0_0x3c1e04,{type:_0x15b0d7,data:_0x152487}=_0x8c399f[_0x4e4e6f(0x1f1)];switch(_0x15b0d7){case _0x4e4e6f(0x1f5):load();break;case _0x4e4e6f(0x1e9):generate(_0x152487);}});