const a0_0x1d0ee7=a0_0x200b;function a0_0x43fa(){const _0x139811=['1071423RjamYd','388812cOLnJH','generate','postMessage','processor','model','getInstance','tokenizer','5phlzbD','3491646uEVlmb','load','Loading\x20model...','ready','start','webgpu','255382RXuJNz','2142763GCNbtA','now','onnx-community/whisper-base','from_pretrained','loading','batch_decode','15631BetKRI','88SzUWEr','55403892UMNkhM','4230PMWgff','addEventListener','data','4ijjPIX','5lsZAGb','update','model_id','complete'];a0_0x43fa=function(){return _0x139811;};return a0_0x43fa();}(function(_0x326138,_0x1398c3){const _0x9e05b2=a0_0x200b,_0x54274e=_0x326138();while(!![]){try{const _0x21b6be=parseInt(_0x9e05b2(0x1c5))/0x1*(-parseInt(_0x9e05b2(0x1d8))/0x2)+parseInt(_0x9e05b2(0x1d2))/0x3*(-parseInt(_0x9e05b2(0x1c4))/0x4)+parseInt(_0x9e05b2(0x1d1))/0x5*(parseInt(_0x9e05b2(0x1ca))/0x6)+-parseInt(_0x9e05b2(0x1d9))/0x7+-parseInt(_0x9e05b2(0x1bf))/0x8*(parseInt(_0x9e05b2(0x1c9))/0x9)+-parseInt(_0x9e05b2(0x1c1))/0xa*(parseInt(_0x9e05b2(0x1df))/0xb)+parseInt(_0x9e05b2(0x1c0))/0xc;if(_0x21b6be===_0x1398c3)break;else _0x54274e['push'](_0x54274e['shift']());}catch(_0x18cf54){_0x54274e['push'](_0x54274e['shift']());}}}(a0_0x43fa,0xa1cdb));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x1d0ee7(0x1c7)]=null;static [a0_0x1d0ee7(0x1d0)]=null;static [a0_0x1d0ee7(0x1cd)]=null;static [a0_0x1d0ee7(0x1ce)]=null;static async[a0_0x1d0ee7(0x1cf)](_0xaa17cd=null){const _0x5ae280=a0_0x1d0ee7;return this[_0x5ae280(0x1c7)]=_0x5ae280(0x1db),this[_0x5ae280(0x1d0)]??=AutoTokenizer[_0x5ae280(0x1dc)](this[_0x5ae280(0x1c7)],{'progress_callback':_0xaa17cd}),this[_0x5ae280(0x1cd)]??=AutoProcessor[_0x5ae280(0x1dc)](this[_0x5ae280(0x1c7)],{'progress_callback':_0xaa17cd}),this[_0x5ae280(0x1ce)]??=WhisperForConditionalGeneration[_0x5ae280(0x1dc)](this[_0x5ae280(0x1c7)],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':_0x5ae280(0x1d7),'progress_callback':_0xaa17cd}),Promise['all']([this[_0x5ae280(0x1d0)],this['processor'],this['model']]);}}let processing=!0x1;async function generate({audio:_0x31d1cc,language:_0x2a47b7}){const _0x1cdbd0=a0_0x1d0ee7;if(processing)return;processing=!0x0,self[_0x1cdbd0(0x1cc)]({'status':_0x1cdbd0(0x1d6)});const [_0x3a3e7e,_0x47f4cf,_0x5dcded]=await AutomaticSpeechRecognitionPipeline['getInstance']();let _0x58c4a1,_0x411d20=0x0;const _0x281c68=new TextStreamer(_0x3a3e7e,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x412d95=>{const _0x5a6642=_0x1cdbd0;let _0x4dcca8;_0x58c4a1??=performance[_0x5a6642(0x1da)](),_0x411d20++>0x0&&(_0x4dcca8=_0x411d20/(performance[_0x5a6642(0x1da)]()-_0x58c4a1)*0x3e8),self[_0x5a6642(0x1cc)]({'status':_0x5a6642(0x1c6),'output':_0x412d95,'tps':_0x4dcca8,'numTokens':_0x411d20});}}),_0x2557f1=await _0x47f4cf(_0x31d1cc),_0x1da94d=await _0x5dcded['generate']({..._0x2557f1,'max_new_tokens':0x40,'language':_0x2a47b7,'streamer':_0x281c68}),_0x19a4b5=_0x3a3e7e[_0x1cdbd0(0x1de)](_0x1da94d,{'skip_special_tokens':!0x0});self['postMessage']({'status':_0x1cdbd0(0x1c8),'output':_0x19a4b5}),processing=!0x1;}async function load(){const _0x46886e=a0_0x1d0ee7;self[_0x46886e(0x1cc)]({'status':_0x46886e(0x1dd),'data':_0x46886e(0x1d4)});const [_0xf274b2,_0x3f1ca0,_0x22eca2]=await AutomaticSpeechRecognitionPipeline['getInstance'](_0x54ee1d=>{self['postMessage'](_0x54ee1d);});self['postMessage']({'status':_0x46886e(0x1dd),'data':'Compiling\x20shaders\x20and\x20warming\x20up\x20model...'}),await _0x22eca2[_0x46886e(0x1cb)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x46886e(0x1cc)]({'status':_0x46886e(0x1d5)});}function a0_0x200b(_0x4b68fe,_0x52eafa){const _0x43faf9=a0_0x43fa();return a0_0x200b=function(_0x200b54,_0x1bec15){_0x200b54=_0x200b54-0x1bf;let _0x1ef306=_0x43faf9[_0x200b54];return _0x1ef306;},a0_0x200b(_0x4b68fe,_0x52eafa);}self[a0_0x1d0ee7(0x1c2)]('message',async _0x5d6b72=>{const _0x1db721=a0_0x1d0ee7,{type:_0x46c0c3,data:_0x49a420}=_0x5d6b72[_0x1db721(0x1c3)];switch(_0x46c0c3){case _0x1db721(0x1d3):load();break;case _0x1db721(0x1cb):generate(_0x49a420);}});