const a0_0x6f9db9=a0_0x40f1;(function(_0x5b82b9,_0x161f63){const _0x2ee545=a0_0x40f1,_0x2afb16=_0x5b82b9();while(!![]){try{const _0x2ad431=parseInt(_0x2ee545(0xb4))/0x1*(-parseInt(_0x2ee545(0xa9))/0x2)+-parseInt(_0x2ee545(0xad))/0x3*(parseInt(_0x2ee545(0xb0))/0x4)+-parseInt(_0x2ee545(0xa7))/0x5+parseInt(_0x2ee545(0xc7))/0x6*(parseInt(_0x2ee545(0xbc))/0x7)+-parseInt(_0x2ee545(0xc3))/0x8*(-parseInt(_0x2ee545(0xb7))/0x9)+-parseInt(_0x2ee545(0xc1))/0xa*(parseInt(_0x2ee545(0xb6))/0xb)+parseInt(_0x2ee545(0xaa))/0xc*(parseInt(_0x2ee545(0xc5))/0xd);if(_0x2ad431===_0x161f63)break;else _0x2afb16['push'](_0x2afb16['shift']());}catch(_0x3f5221){_0x2afb16['push'](_0x2afb16['shift']());}}}(a0_0x1965,0x4f3d8));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.3.3/dist/transformers.min.js';function a0_0x40f1(_0x2ab7bf,_0x2699ee){const _0x1965ae=a0_0x1965();return a0_0x40f1=function(_0x40f19c,_0x55523d){_0x40f19c=_0x40f19c-0xa6;let _0x157781=_0x1965ae[_0x40f19c];return _0x157781;},a0_0x40f1(_0x2ab7bf,_0x2699ee);}function a0_0x1965(){const _0x231cb2=['fp32','addEventListener','webgpu','21764ZLDnkg','getInstance','9482ggOyxC','3328164qPnjfr','loading','model','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','load','26607zPkclM','tokenizer','processor','start','ready','5450lcJClj','from_pretrained','8yGuMus','generate','18012631xLXWVH','postMessage','582ESrSnG','now','2913790mBzqjg','update','48ooWaHP','12omROVQ','model_id','complete','224628uVPkeH','all','data','12tntzTy'];a0_0x1965=function(){return _0x231cb2;};return a0_0x1965();}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x6f9db9(0xab)]=null;static [a0_0x6f9db9(0xbd)]=null;static ['processor']=null;static [a0_0x6f9db9(0xb9)]=null;static async[a0_0x6f9db9(0xb5)](_0x5daf52=null){const _0x45fd22=a0_0x6f9db9;return this[_0x45fd22(0xab)]='onnx-community/whisper-base',this[_0x45fd22(0xbd)]??=AutoTokenizer['from_pretrained'](this[_0x45fd22(0xab)],{'progress_callback':_0x5daf52}),this[_0x45fd22(0xbe)]??=AutoProcessor[_0x45fd22(0xc2)](this[_0x45fd22(0xab)],{'progress_callback':_0x5daf52}),this[_0x45fd22(0xb9)]??=WhisperForConditionalGeneration['from_pretrained'](this[_0x45fd22(0xab)],{'dtype':{'encoder_model':_0x45fd22(0xb1),'decoder_model_merged':'q4'},'device':_0x45fd22(0xb3),'progress_callback':_0x5daf52}),Promise[_0x45fd22(0xae)]([this[_0x45fd22(0xbd)],this['processor'],this[_0x45fd22(0xb9)]]);}}let processing=!0x1;async function generate({audio:_0x2a1ee7,language:_0x241efe}){const _0x5eecbc=a0_0x6f9db9;if(processing)return;processing=!0x0,self[_0x5eecbc(0xc6)]({'status':_0x5eecbc(0xbf)});const [_0x1dd744,_0x5c5052,_0xb847d7]=await AutomaticSpeechRecognitionPipeline[_0x5eecbc(0xb5)]();let _0xd6d164,_0x13e479=0x0;const _0x405e26=new TextStreamer(_0x1dd744,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x2c9350=>{const _0x5e2df2=_0x5eecbc;let _0x7292dc;_0xd6d164??=performance[_0x5e2df2(0xa6)](),_0x13e479++>0x0&&(_0x7292dc=_0x13e479/(performance[_0x5e2df2(0xa6)]()-_0xd6d164)*0x3e8),self[_0x5e2df2(0xc6)]({'status':_0x5e2df2(0xa8),'output':_0x2c9350,'tps':_0x7292dc,'numTokens':_0x13e479});}}),_0x26145f=await _0x5c5052(_0x2a1ee7),_0x1a7816=await _0xb847d7[_0x5eecbc(0xc4)]({..._0x26145f,'max_new_tokens':0x40,'language':_0x241efe,'streamer':_0x405e26}),_0x22ac24=_0x1dd744['batch_decode'](_0x1a7816,{'skip_special_tokens':!0x0});self[_0x5eecbc(0xc6)]({'status':_0x5eecbc(0xac),'output':_0x22ac24}),processing=!0x1;}async function load(){const _0x25cd11=a0_0x6f9db9;self[_0x25cd11(0xc6)]({'status':'loading','data':'Loading\x20model...'});const [_0x2b58a9,_0x51232b,_0x4f20c5]=await AutomaticSpeechRecognitionPipeline['getInstance'](_0x39bab4=>{const _0x3cd215=_0x25cd11;self[_0x3cd215(0xc6)](_0x39bab4);});self[_0x25cd11(0xc6)]({'status':_0x25cd11(0xb8),'data':_0x25cd11(0xba)}),await _0x4f20c5[_0x25cd11(0xc4)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x25cd11(0xc6)]({'status':_0x25cd11(0xc0)});}self[a0_0x6f9db9(0xb2)]('message',async _0x19ea35=>{const _0x18a84c=a0_0x6f9db9,{type:_0x4839c8,data:_0x4f506e}=_0x19ea35[_0x18a84c(0xaf)];switch(_0x4839c8){case _0x18a84c(0xbb):load();break;case _0x18a84c(0xc4):generate(_0x4f506e);}});