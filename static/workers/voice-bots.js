const a0_0x186ceb=a0_0xfd80;function a0_0x1292(){const _0x5d1f50=['323844WLkEFp','load','8rXqivz','model_id','12516fNNTzH','from_pretrained','3332469eXEdPG','update','loading','all','start','tokenizer','generate','onnx-community/whisper-base','13cqSQDR','3885580AJNfVX','11048364eELQuu','getInstance','650xgLtDg','message','postMessage','ready','3BxSlWs','4wxxHVs','processor','model','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','8764104qigRgx','now','215kfFKuP','data','172579bvkHuI'];a0_0x1292=function(){return _0x5d1f50;};return a0_0x1292();}(function(_0x339b0b,_0x7ab668){const _0x15dc65=a0_0xfd80,_0x25a6b1=_0x339b0b();while(!![]){try{const _0x1dd1fb=-parseInt(_0x15dc65(0x111))/0x1*(-parseInt(_0x15dc65(0x11a))/0x2)+-parseInt(_0x15dc65(0x110))/0x3*(parseInt(_0x15dc65(0x109))/0x4)+-parseInt(_0x15dc65(0x117))/0x5*(parseInt(_0x15dc65(0x11e))/0x6)+-parseInt(_0x15dc65(0x120))/0x7*(parseInt(_0x15dc65(0x11c))/0x8)+parseInt(_0x15dc65(0x10a))/0x9+-parseInt(_0x15dc65(0x10c))/0xa*(-parseInt(_0x15dc65(0x119))/0xb)+parseInt(_0x15dc65(0x115))/0xc*(-parseInt(_0x15dc65(0x128))/0xd);if(_0x1dd1fb===_0x7ab668)break;else _0x25a6b1['push'](_0x25a6b1['shift']());}catch(_0xc11787){_0x25a6b1['push'](_0x25a6b1['shift']());}}}(a0_0x1292,0x9936f));function a0_0xfd80(_0x390ce0,_0x19d952){const _0x1292d1=a0_0x1292();return a0_0xfd80=function(_0xfd80,_0x11f8c3){_0xfd80=_0xfd80-0x109;let _0x543ac4=_0x1292d1[_0xfd80];return _0x543ac4;},a0_0xfd80(_0x390ce0,_0x19d952);}import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x186ceb(0x11d)]=null;static ['tokenizer']=null;static [a0_0x186ceb(0x112)]=null;static [a0_0x186ceb(0x113)]=null;static async[a0_0x186ceb(0x10b)](_0x29a46b=null){const _0x38762b=a0_0x186ceb;return this[_0x38762b(0x11d)]=_0x38762b(0x127),this[_0x38762b(0x125)]??=AutoTokenizer['from_pretrained'](this[_0x38762b(0x11d)],{'progress_callback':_0x29a46b}),this[_0x38762b(0x112)]??=AutoProcessor[_0x38762b(0x11f)](this[_0x38762b(0x11d)],{'progress_callback':_0x29a46b}),this[_0x38762b(0x113)]??=WhisperForConditionalGeneration['from_pretrained'](this['model_id'],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':'webgpu','progress_callback':_0x29a46b}),Promise[_0x38762b(0x123)]([this[_0x38762b(0x125)],this[_0x38762b(0x112)],this[_0x38762b(0x113)]]);}}let processing=!0x1;async function generate({audio:_0x124d0c,language:_0x44281f}){const _0x48cbe0=a0_0x186ceb;if(processing)return;processing=!0x0,self[_0x48cbe0(0x10e)]({'status':_0x48cbe0(0x124)});const [_0xf3c0dd,_0x4f904c,_0x1f3a5f]=await AutomaticSpeechRecognitionPipeline[_0x48cbe0(0x10b)]();let _0x4a0412,_0x416509=0x0;const _0x310acb=new TextStreamer(_0xf3c0dd,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x1a8a41=>{const _0xe2b806=_0x48cbe0;let _0x2d5927;_0x4a0412??=performance['now'](),_0x416509++>0x0&&(_0x2d5927=_0x416509/(performance[_0xe2b806(0x116)]()-_0x4a0412)*0x3e8),self[_0xe2b806(0x10e)]({'status':_0xe2b806(0x121),'output':_0x1a8a41,'tps':_0x2d5927,'numTokens':_0x416509});}}),_0x415b9f=await _0x4f904c(_0x124d0c),_0xa9f456=await _0x1f3a5f[_0x48cbe0(0x126)]({..._0x415b9f,'max_new_tokens':0x40,'language':_0x44281f,'streamer':_0x310acb}),_0xeb85ca=_0xf3c0dd['batch_decode'](_0xa9f456,{'skip_special_tokens':!0x0});self['postMessage']({'status':'complete','output':_0xeb85ca}),processing=!0x1;}async function load(){const _0x4f8ce0=a0_0x186ceb;self[_0x4f8ce0(0x10e)]({'status':_0x4f8ce0(0x122),'data':'Loading\x20model...'});const [_0x5dbc03,_0x78e883,_0x12f76e]=await AutomaticSpeechRecognitionPipeline[_0x4f8ce0(0x10b)](_0x3067a5=>{self['postMessage'](_0x3067a5);});self[_0x4f8ce0(0x10e)]({'status':'loading','data':_0x4f8ce0(0x114)}),await _0x12f76e[_0x4f8ce0(0x126)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x4f8ce0(0x10e)]({'status':_0x4f8ce0(0x10f)});}self['addEventListener'](a0_0x186ceb(0x10d),async _0x4827c3=>{const _0x243e54=a0_0x186ceb,{type:_0x1157dc,data:_0x5dcae5}=_0x4827c3[_0x243e54(0x118)];switch(_0x1157dc){case _0x243e54(0x11b):load();break;case _0x243e54(0x126):generate(_0x5dcae5);}});