const a0_0x38124b=a0_0x3e4b;(function(_0x4e68d9,_0x2af800){const _0x30b8e7=a0_0x3e4b,_0x4b159b=_0x4e68d9();while(!![]){try{const _0x314d08=parseInt(_0x30b8e7(0x1fa))/0x1+-parseInt(_0x30b8e7(0x1f8))/0x2*(-parseInt(_0x30b8e7(0x1f9))/0x3)+parseInt(_0x30b8e7(0x205))/0x4+-parseInt(_0x30b8e7(0x206))/0x5+parseInt(_0x30b8e7(0x1f6))/0x6+-parseInt(_0x30b8e7(0x1fc))/0x7+-parseInt(_0x30b8e7(0x200))/0x8;if(_0x314d08===_0x2af800)break;else _0x4b159b['push'](_0x4b159b['shift']());}catch(_0x437dac){_0x4b159b['push'](_0x4b159b['shift']());}}}(a0_0x3221,0x7e90e));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static ['model_id']=null;static [a0_0x38124b(0x20c)]=null;static ['processor']=null;static [a0_0x38124b(0x20a)]=null;static async['getInstance'](_0x30d2a2=null){const _0xed712=a0_0x38124b;return this[_0xed712(0x20d)]=_0xed712(0x1ff),this[_0xed712(0x20c)]??=AutoTokenizer['from_pretrained'](this[_0xed712(0x20d)],{'progress_callback':_0x30d2a2}),this[_0xed712(0x20e)]??=AutoProcessor['from_pretrained'](this['model_id'],{'progress_callback':_0x30d2a2}),this['model']??=WhisperForConditionalGeneration['from_pretrained'](this[_0xed712(0x20d)],{'dtype':{'encoder_model':'fp32','decoder_model_merged':'q4'},'device':_0xed712(0x209),'progress_callback':_0x30d2a2}),Promise[_0xed712(0x1f3)]([this['tokenizer'],this[_0xed712(0x20e)],this[_0xed712(0x20a)]]);}}let processing=!0x1;async function generate({audio:_0xea8ce9,language:_0x2f4a81}){const _0x1f2987=a0_0x38124b;if(processing)return;processing=!0x0,self[_0x1f2987(0x207)]({'status':_0x1f2987(0x20f)});const [_0x5b43c5,_0x39728c,_0x6e6fb3]=await AutomaticSpeechRecognitionPipeline[_0x1f2987(0x1f7)]();let _0x55cad3,_0x4b289c=0x0;const _0x2411d5=new TextStreamer(_0x5b43c5,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x3ca38d=>{const _0x5e8298=_0x1f2987;let _0x4a57d0;_0x55cad3??=performance[_0x5e8298(0x20b)](),_0x4b289c++>0x0&&(_0x4a57d0=_0x4b289c/(performance[_0x5e8298(0x20b)]()-_0x55cad3)*0x3e8),self['postMessage']({'status':_0x5e8298(0x201),'output':_0x3ca38d,'tps':_0x4a57d0,'numTokens':_0x4b289c});}}),_0x44ae84=await _0x39728c(_0xea8ce9),_0xcd22ee=await _0x6e6fb3[_0x1f2987(0x1fd)]({..._0x44ae84,'max_new_tokens':0x40,'language':_0x2f4a81,'streamer':_0x2411d5}),_0x1dbb31=_0x5b43c5[_0x1f2987(0x1f4)](_0xcd22ee,{'skip_special_tokens':!0x0});self[_0x1f2987(0x207)]({'status':_0x1f2987(0x202),'output':_0x1dbb31}),processing=!0x1;}async function load(){const _0x93587b=a0_0x38124b;self['postMessage']({'status':_0x93587b(0x203),'data':'Loading\x20model...'});const [_0x5b9022,_0x780f6d,_0x521a95]=await AutomaticSpeechRecognitionPipeline[_0x93587b(0x1f7)](_0x58cf2c=>{const _0x50c126=_0x93587b;self[_0x50c126(0x207)](_0x58cf2c);});self[_0x93587b(0x207)]({'status':_0x93587b(0x203),'data':_0x93587b(0x1f5)}),await _0x521a95[_0x93587b(0x1fd)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x93587b(0x207)]({'status':'ready'});}function a0_0x3221(){const _0x62f8e9=['generate','load','onnx-community/whisper-base','286408VwLuda','update','complete','loading','message','2519872NLqGXS','2449445uqzrCW','postMessage','addEventListener','webgpu','model','now','tokenizer','model_id','processor','start','all','batch_decode','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','2746938CzvMIn','getInstance','2jLiDtW','893058rCqsxR','99350fIpSDA','data','3085061ycKcyD'];a0_0x3221=function(){return _0x62f8e9;};return a0_0x3221();}function a0_0x3e4b(_0x35c58a,_0x52d068){const _0x322168=a0_0x3221();return a0_0x3e4b=function(_0x3e4b14,_0x8262aa){_0x3e4b14=_0x3e4b14-0x1f3;let _0x46831a=_0x322168[_0x3e4b14];return _0x46831a;},a0_0x3e4b(_0x35c58a,_0x52d068);}self[a0_0x38124b(0x208)](a0_0x38124b(0x204),async _0x476a22=>{const _0x5259d7=a0_0x38124b,{type:_0xfd405c,data:_0x12a29e}=_0x476a22[_0x5259d7(0x1fb)];switch(_0xfd405c){case _0x5259d7(0x1fe):load();break;case _0x5259d7(0x1fd):generate(_0x12a29e);}});