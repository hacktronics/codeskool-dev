const a0_0x64e227=a0_0x2744;(function(_0xeb838,_0x2b0853){const _0x1a807f=a0_0x2744,_0x50425e=_0xeb838();while(!![]){try{const _0x5269fa=-parseInt(_0x1a807f(0xa2))/0x1*(parseInt(_0x1a807f(0xa5))/0x2)+parseInt(_0x1a807f(0xa0))/0x3*(parseInt(_0x1a807f(0x9a))/0x4)+-parseInt(_0x1a807f(0x8a))/0x5+parseInt(_0x1a807f(0x94))/0x6*(-parseInt(_0x1a807f(0xaa))/0x7)+-parseInt(_0x1a807f(0x8d))/0x8*(-parseInt(_0x1a807f(0xa6))/0x9)+parseInt(_0x1a807f(0x8c))/0xa+parseInt(_0x1a807f(0x9e))/0xb*(parseInt(_0x1a807f(0xa8))/0xc);if(_0x5269fa===_0x2b0853)break;else _0x50425e['push'](_0x50425e['shift']());}catch(_0x41e8c1){_0x50425e['push'](_0x50425e['shift']());}}}(a0_0x15e8,0x1bb98));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';function a0_0x2744(_0x5c3036,_0x5c7e92){const _0x15e8a4=a0_0x15e8();return a0_0x2744=function(_0x274460,_0x29aafb){_0x274460=_0x274460-0x89;let _0x402a5e=_0x15e8a4[_0x274460];return _0x402a5e;},a0_0x2744(_0x5c3036,_0x5c7e92);}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x64e227(0x90)]=null;static [a0_0x64e227(0xa4)]=null;static [a0_0x64e227(0xa7)]=null;static [a0_0x64e227(0xa3)]=null;static async[a0_0x64e227(0x98)](_0x35edc4=null){const _0x13f2a5=a0_0x64e227;return this[_0x13f2a5(0x90)]=_0x13f2a5(0x9f),this[_0x13f2a5(0xa4)]??=AutoTokenizer['from_pretrained'](this[_0x13f2a5(0x90)],{'progress_callback':_0x35edc4}),this[_0x13f2a5(0xa7)]??=AutoProcessor[_0x13f2a5(0x8e)](this[_0x13f2a5(0x90)],{'progress_callback':_0x35edc4}),this[_0x13f2a5(0xa3)]??=WhisperForConditionalGeneration[_0x13f2a5(0x8e)](this[_0x13f2a5(0x90)],{'dtype':{'encoder_model':_0x13f2a5(0x8b),'decoder_model_merged':'q4'},'device':'webgpu','progress_callback':_0x35edc4}),Promise[_0x13f2a5(0x9b)]([this['tokenizer'],this[_0x13f2a5(0xa7)],this[_0x13f2a5(0xa3)]]);}}let processing=!0x1;function a0_0x15e8(){const _0x77bbf6=['tokenizer','186ixYHYc','55017JjnbRJ','processor','12UHXwkZ','start','49KSbkkN','ready','597390SqpElK','fp32','1371170IoPQut','248DMaaJs','from_pretrained','addEventListener','model_id','loading','Loading\x20model...','load','9474mcHtmv','batch_decode','complete','update','getInstance','now','32020rvWoOn','all','generate','postMessage','4873XLIvOO','onnx-community/whisper-base','33hEzlwA','Compiling\x20shaders\x20and\x20warming\x20up\x20model...','1839PYEwsZ','model'];a0_0x15e8=function(){return _0x77bbf6;};return a0_0x15e8();}async function generate({audio:_0x4fbfae,language:_0x9a3538}){const _0x1fba08=a0_0x64e227;if(processing)return;processing=!0x0,self[_0x1fba08(0x9d)]({'status':_0x1fba08(0xa9)});const [_0x1ac307,_0x3ce18c,_0x2b5e30]=await AutomaticSpeechRecognitionPipeline['getInstance']();let _0x1a7974,_0x49aabf=0x0;const _0x9883e3=new TextStreamer(_0x1ac307,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x5c5d81=>{const _0x456efa=_0x1fba08;let _0x22dcf3;_0x1a7974??=performance[_0x456efa(0x99)](),_0x49aabf++>0x0&&(_0x22dcf3=_0x49aabf/(performance[_0x456efa(0x99)]()-_0x1a7974)*0x3e8),self['postMessage']({'status':_0x456efa(0x97),'output':_0x5c5d81,'tps':_0x22dcf3,'numTokens':_0x49aabf});}}),_0x3c1e0e=await _0x3ce18c(_0x4fbfae),_0x39f6fc=await _0x2b5e30[_0x1fba08(0x9c)]({..._0x3c1e0e,'max_new_tokens':0x40,'language':_0x9a3538,'streamer':_0x9883e3}),_0x2a7fc9=_0x1ac307[_0x1fba08(0x95)](_0x39f6fc,{'skip_special_tokens':!0x0});self[_0x1fba08(0x9d)]({'status':_0x1fba08(0x96),'output':_0x2a7fc9}),processing=!0x1;}async function load(){const _0x3e0756=a0_0x64e227;self[_0x3e0756(0x9d)]({'status':_0x3e0756(0x91),'data':_0x3e0756(0x92)});const [_0x58c763,_0x17b856,_0x10b71c]=await AutomaticSpeechRecognitionPipeline[_0x3e0756(0x98)](_0x21f605=>{self['postMessage'](_0x21f605);});self[_0x3e0756(0x9d)]({'status':_0x3e0756(0x91),'data':_0x3e0756(0xa1)}),await _0x10b71c[_0x3e0756(0x9c)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x3e0756(0x9d)]({'status':_0x3e0756(0x89)});}self[a0_0x64e227(0x8f)]('message',async _0x39182c=>{const _0x4d5260=a0_0x64e227,{type:_0x4ad4e6,data:_0x1734f6}=_0x39182c['data'];switch(_0x4ad4e6){case _0x4d5260(0x93):load();break;case _0x4d5260(0x9c):generate(_0x1734f6);}});