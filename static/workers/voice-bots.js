const a0_0x672dbc=a0_0x2ed6;(function(_0x46f992,_0x26a1f7){const _0x4e71e1=a0_0x2ed6,_0x1856b8=_0x46f992();while(!![]){try{const _0x5688ba=-parseInt(_0x4e71e1(0x79))/0x1+-parseInt(_0x4e71e1(0x7b))/0x2*(-parseInt(_0x4e71e1(0x70))/0x3)+-parseInt(_0x4e71e1(0x84))/0x4*(-parseInt(_0x4e71e1(0x81))/0x5)+-parseInt(_0x4e71e1(0x71))/0x6*(parseInt(_0x4e71e1(0x82))/0x7)+-parseInt(_0x4e71e1(0x75))/0x8+-parseInt(_0x4e71e1(0x6c))/0x9*(-parseInt(_0x4e71e1(0x77))/0xa)+-parseInt(_0x4e71e1(0x86))/0xb*(-parseInt(_0x4e71e1(0x83))/0xc);if(_0x5688ba===_0x26a1f7)break;else _0x1856b8['push'](_0x1856b8['shift']());}catch(_0x31eb9e){_0x1856b8['push'](_0x1856b8['shift']());}}}(a0_0x3df9,0xc4e6e));import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.4.0/dist/transformers.min.js';function a0_0x3df9(){const _0x2d7f0e=['Loading\x20model...','15DtlOYT','28BlyiDT','25812mzEYpv','172852IGNZbN','postMessage','12397XJvhFk','generate','data','addEventListener','901863OlNOuW','processor','batch_decode','fp32','546qBTHTH','1009266DQyBvE','all','model_id','ready','9642912kyDxKV','model','80MuEJCV','from_pretrained','970872frNeor','loading','3298lSuQsI','getInstance','update','start','tokenizer'];a0_0x3df9=function(){return _0x2d7f0e;};return a0_0x3df9();}const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x672dbc(0x73)]=null;static [a0_0x672dbc(0x7f)]=null;static ['processor']=null;static [a0_0x672dbc(0x76)]=null;static async[a0_0x672dbc(0x7c)](_0x49ca43=null){const _0x147831=a0_0x672dbc;return this['model_id']='onnx-community/whisper-base',this[_0x147831(0x7f)]??=AutoTokenizer[_0x147831(0x78)](this[_0x147831(0x73)],{'progress_callback':_0x49ca43}),this['processor']??=AutoProcessor[_0x147831(0x78)](this[_0x147831(0x73)],{'progress_callback':_0x49ca43}),this[_0x147831(0x76)]??=WhisperForConditionalGeneration[_0x147831(0x78)](this[_0x147831(0x73)],{'dtype':{'encoder_model':_0x147831(0x6f),'decoder_model_merged':'q4'},'device':'webgpu','progress_callback':_0x49ca43}),Promise[_0x147831(0x72)]([this[_0x147831(0x7f)],this[_0x147831(0x6d)],this['model']]);}}function a0_0x2ed6(_0x59f8e1,_0x2bccad){const _0x3df9ba=a0_0x3df9();return a0_0x2ed6=function(_0x2ed661,_0x2ab1b8){_0x2ed661=_0x2ed661-0x69;let _0x42ea20=_0x3df9ba[_0x2ed661];return _0x42ea20;},a0_0x2ed6(_0x59f8e1,_0x2bccad);}let processing=!0x1;async function generate({audio:_0x1f039a,language:_0xb53917}){const _0x4d83d6=a0_0x672dbc;if(processing)return;processing=!0x0,self['postMessage']({'status':_0x4d83d6(0x7e)});const [_0xad4b34,_0x5b162a,_0x196de9]=await AutomaticSpeechRecognitionPipeline[_0x4d83d6(0x7c)]();let _0x174d03,_0x13f5cc=0x0;const _0xf5ff95=new TextStreamer(_0xad4b34,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x529f51=>{const _0x382a93=_0x4d83d6;let _0x2a1f49;_0x174d03??=performance['now'](),_0x13f5cc++>0x0&&(_0x2a1f49=_0x13f5cc/(performance['now']()-_0x174d03)*0x3e8),self[_0x382a93(0x85)]({'status':_0x382a93(0x7d),'output':_0x529f51,'tps':_0x2a1f49,'numTokens':_0x13f5cc});}}),_0x574303=await _0x5b162a(_0x1f039a),_0x201fa7=await _0x196de9[_0x4d83d6(0x69)]({..._0x574303,'max_new_tokens':0x40,'language':_0xb53917,'streamer':_0xf5ff95}),_0x4c825f=_0xad4b34[_0x4d83d6(0x6e)](_0x201fa7,{'skip_special_tokens':!0x0});self[_0x4d83d6(0x85)]({'status':'complete','output':_0x4c825f}),processing=!0x1;}async function load(){const _0x13636e=a0_0x672dbc;self[_0x13636e(0x85)]({'status':'loading','data':_0x13636e(0x80)});const [_0x4611d3,_0x4bf818,_0x4ea908]=await AutomaticSpeechRecognitionPipeline[_0x13636e(0x7c)](_0x503bfe=>{self['postMessage'](_0x503bfe);});self['postMessage']({'status':_0x13636e(0x7a),'data':'Compiling\x20shaders\x20and\x20warming\x20up\x20model...'}),await _0x4ea908[_0x13636e(0x69)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self['postMessage']({'status':_0x13636e(0x74)});}self[a0_0x672dbc(0x6b)]('message',async _0x5d3db0=>{const _0x5b357c=a0_0x672dbc,{type:_0x2e8baa,data:_0x13a446}=_0x5d3db0[_0x5b357c(0x6a)];switch(_0x2e8baa){case'load':load();break;case'generate':generate(_0x13a446);}});