const a0_0x50db77=a0_0x3a82;function a0_0x25c1(){const _0x2c5154=['all','webgpu','now','from_pretrained','532fdrGkO','loading','batch_decode','addEventListener','fp32','model','getInstance','26277075DCwedy','postMessage','start','Loading\x20model...','load','7049800UQLhMv','9058662AGRLOL','8409104wRYaQy','update','349694ssRbVB','complete','processor','generate','model_id','8tqxSXj','tokenizer','26637kzvIWe','1115331alReOE'];a0_0x25c1=function(){return _0x2c5154;};return a0_0x25c1();}(function(_0x42fb03,_0x27c160){const _0x3be2c2=a0_0x3a82,_0x16a151=_0x42fb03();while(!![]){try{const _0x31d5b9=parseInt(_0x3be2c2(0x12a))/0x1*(parseInt(_0x3be2c2(0x12f))/0x2)+parseInt(_0x3be2c2(0x131))/0x3*(parseInt(_0x3be2c2(0x137))/0x4)+parseInt(_0x3be2c2(0x143))/0x5+-parseInt(_0x3be2c2(0x127))/0x6+parseInt(_0x3be2c2(0x132))/0x7+parseInt(_0x3be2c2(0x128))/0x8+-parseInt(_0x3be2c2(0x13e))/0x9;if(_0x31d5b9===_0x27c160)break;else _0x16a151['push'](_0x16a151['shift']());}catch(_0x360813){_0x16a151['push'](_0x16a151['shift']());}}}(a0_0x25c1,0xbc266));function a0_0x3a82(_0x5a51cf,_0x37f4af){const _0x25c1a0=a0_0x25c1();return a0_0x3a82=function(_0x3a827b,_0x5902f8){_0x3a827b=_0x3a827b-0x127;let _0x13354d=_0x25c1a0[_0x3a827b];return _0x13354d;},a0_0x3a82(_0x5a51cf,_0x37f4af);}import{AutoTokenizer,AutoProcessor,WhisperForConditionalGeneration,TextStreamer,full}from'https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.3.3/dist/transformers.min.js';const MAX_NEW_TOKENS=0x40;class AutomaticSpeechRecognitionPipeline{static [a0_0x50db77(0x12e)]=null;static [a0_0x50db77(0x130)]=null;static [a0_0x50db77(0x12c)]=null;static [a0_0x50db77(0x13c)]=null;static async[a0_0x50db77(0x13d)](_0x3fff36=null){const _0x4f3471=a0_0x50db77;return this['model_id']='onnx-community/whisper-base',this[_0x4f3471(0x130)]??=AutoTokenizer[_0x4f3471(0x136)](this['model_id'],{'progress_callback':_0x3fff36}),this['processor']??=AutoProcessor[_0x4f3471(0x136)](this[_0x4f3471(0x12e)],{'progress_callback':_0x3fff36}),this[_0x4f3471(0x13c)]??=WhisperForConditionalGeneration[_0x4f3471(0x136)](this[_0x4f3471(0x12e)],{'dtype':{'encoder_model':_0x4f3471(0x13b),'decoder_model_merged':'q4'},'device':_0x4f3471(0x134),'progress_callback':_0x3fff36}),Promise[_0x4f3471(0x133)]([this[_0x4f3471(0x130)],this[_0x4f3471(0x12c)],this[_0x4f3471(0x13c)]]);}}let processing=!0x1;async function generate({audio:_0x5811b3,language:_0x117bfa}){const _0x3ec01f=a0_0x50db77;if(processing)return;processing=!0x0,self[_0x3ec01f(0x13f)]({'status':_0x3ec01f(0x140)});const [_0xdd8b2b,_0xf796b2,_0x2738bc]=await AutomaticSpeechRecognitionPipeline[_0x3ec01f(0x13d)]();let _0x28fb00,_0x2d907e=0x0;const _0x10e2d2=new TextStreamer(_0xdd8b2b,{'skip_prompt':!0x0,'skip_special_tokens':!0x0,'callback_function':_0x428514=>{const _0x88765d=_0x3ec01f;let _0x5a3b40;_0x28fb00??=performance['now'](),_0x2d907e++>0x0&&(_0x5a3b40=_0x2d907e/(performance[_0x88765d(0x135)]()-_0x28fb00)*0x3e8),self[_0x88765d(0x13f)]({'status':_0x88765d(0x129),'output':_0x428514,'tps':_0x5a3b40,'numTokens':_0x2d907e});}}),_0x14323a=await _0xf796b2(_0x5811b3),_0x32dc0d=await _0x2738bc[_0x3ec01f(0x12d)]({..._0x14323a,'max_new_tokens':0x40,'language':_0x117bfa,'streamer':_0x10e2d2}),_0xc8171=_0xdd8b2b[_0x3ec01f(0x139)](_0x32dc0d,{'skip_special_tokens':!0x0});self[_0x3ec01f(0x13f)]({'status':_0x3ec01f(0x12b),'output':_0xc8171}),processing=!0x1;}async function load(){const _0x311823=a0_0x50db77;self['postMessage']({'status':_0x311823(0x138),'data':_0x311823(0x141)});const [_0x16f897,_0x45ea95,_0x1e9e23]=await AutomaticSpeechRecognitionPipeline[_0x311823(0x13d)](_0x4e8b95=>{const _0x1a901f=_0x311823;self[_0x1a901f(0x13f)](_0x4e8b95);});self['postMessage']({'status':_0x311823(0x138),'data':'Compiling\x20shaders\x20and\x20warming\x20up\x20model...'}),await _0x1e9e23[_0x311823(0x12d)]({'input_features':full([0x1,0x50,0xbb8],0x0),'max_new_tokens':0x1}),self[_0x311823(0x13f)]({'status':'ready'});}self[a0_0x50db77(0x13a)]('message',async _0x29bf8a=>{const _0x59d458=a0_0x50db77,{type:_0x111817,data:_0x3b9990}=_0x29bf8a['data'];switch(_0x111817){case _0x59d458(0x142):load();break;case _0x59d458(0x12d):generate(_0x3b9990);}});